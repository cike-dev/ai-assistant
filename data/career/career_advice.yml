flows:
  career_advice:
    name: Career Advising Session
    description: >
      Guide students through a friendly, personalized career counseling session.
      Support natural corrections, follow-ups, and conversation endings.
    
    
    persisted_slots:
      - student_name
      - current_major
      - year_of_study
      - career_interest
      - gpa
      - has_internship
      - visa_status
      # - last_career_summary 
      # - advice_history  
      # # - user_wants_to_end

    steps:
     # Optional: Name
      - collect: student_name
        description: "Collect the student's name (optional)"
        ask_before_filling: false
        utter: utter_ask_student_name

      # Essential: Major
      - collect: current_major
        description: "Collect the student's current major"
        ask_before_filling: false
        utter: utter_ask_current_major

      # Optional: Year
      - collect: year_of_study
        description: "Determine student's year (optional)"
        ask_before_filling: false
        utter: utter_ask_year_of_study

      # Essential: Career Interest
      - collect: career_interest
        description: "Understand career interests"
        ask_before_filling: false
        utter: utter_ask_career_interest

      # Optional: GPA (with explicit skip option)
      - collect: gpa
        description: "Optionally collect GPA"
        ask_before_filling: false
        utter: utter_ask_gpa

      # Optional: Internship
      - collect: has_internship
        description: "Ask about internship experience (optional)"
        ask_before_filling: false
        utter: utter_ask_has_internship

      # Optional: Visa Status (only if relevant)
      - collect: visa_status
        description: "Ask about visa status for international students (optional)"
        ask_before_filling: false
        utter: utter_ask_visa_status


      # Call the academic advisor sub-agent directly
      - call: career_guide
        next: END  # ← Let CALM handle follow-ups


      # # Give initial advice ONCE
      # - action: action_give_career_advice
      #   next: END  # ← Let CALM handle follow-ups


  quick_career_advice:
    name: Quick Career Advice
    description: >
      Provide immediate guidance with minimal questions for users who want quick help.
    
    steps:
      - collect: career_interest
        description: "What career topic do you need advice on?"
        ask_before_filling: false
        utter: utter_ask_career_interest_quick

      # Call the academic advisor sub-agent directly
      - call: career_guide
        next: END
      
      # - action: action_give_career_advice
      #   next: END  # ← Let CALM handle follow-ups